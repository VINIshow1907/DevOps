<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de Bicicleta</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/bicicleta.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">
        <img src="/assets/logo.png" alt="Logo Bicicletaria">
        <h1>Sistema de Bicicletas</h1>
      </div>
    </div>

    <div th:if="${error}" class="error-message" th:text="${error}"></div>

    <form th:action="@{/bicicletas/salvar}" method="POST" th:object="${bicicleta}">
      <h1>
        <span th:text="${bicicleta.id == null ? 'Nova Bicicleta' : 'Editar Bicicleta'}"></span>
      </h1>

      <input type="hidden" name="id" th:field="*{id}" readonly />

      <div class="form-group">
        <label for="modelo">
          Modelo
        </label>
        <input type="text" name="modelo" th:field="*{modelo}" required 
               th:class="${#fields.hasErrors('modelo')} ? 'error'"
               placeholder="Digite o modelo da bicicleta" />
        <span class="error" th:if="${#fields.hasErrors('modelo')}" 
              th:errors="*{modelo}"></span>
      </div>

      <div class="form-group">
        <label for="marca">
          Marca
        </label>
        <input type="text" name="marca" th:field="*{marca}" required 
               th:class="${#fields.hasErrors('marca')} ? 'error'"
               placeholder="Digite a marca" />
        <span class="error" th:if="${#fields.hasErrors('marca')}" 
              th:errors="*{marca}"></span>
      </div>

      <div class="form-group">
        <label for="ano">
          Ano
        </label>
        <input type="text" name="ano" th:field="*{ano}" required 
               th:class="${#fields.hasErrors('ano')} ? 'error'"
               placeholder="Digite o ano de fabricação" />
        <span class="error" th:if="${#fields.hasErrors('ano')}" 
              th:errors="*{ano}"></span>
      </div>

      <div class="form-group">
        <label for="cor">
          Cor
        </label>
        <input type="text" name="cor" th:field="*{cor}" required 
               th:class="${#fields.hasErrors('cor')} ? 'error'"
               placeholder="Digite a cor da bicicleta" />
        <span class="error" th:if="${#fields.hasErrors('cor')}" 
              th:errors="*{cor}"></span>
      </div>

      <div class="form-group">
        <label for="categoria">
          Categoria
        </label>
        <select name="categoria.id" th:field="*{categoria.id}" required
                th:class="${#fields.hasErrors('categoria')} ? 'error'">
          <option value="">Selecione uma categoria</option>
          <option th:each="cat : ${categorias}"
                  th:value="${cat.id}"
                  th:text="${cat.nomecategoria}">
          </option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('categoria')}" 
              th:errors="*{categoria}"></span>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-salvar">Salvar</button>
        <a th:href="@{/bicicletas/listar}" class="btn-cancelar">Cancelar</a>
      </div>
    </form>
  </div>
</body>
</html>